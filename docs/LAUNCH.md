# Product Launch Checklist

This document outlines everything needed to successfully launch the Visual Tool application to production.

## üî¥ Critical (Must Have Before Launch)

### 1. Product Name & Domain

**Status:** ‚è≥ Pending

**Tasks:**
- [ ] Finalize product name (currently placeholder "26 Diagrams")
- [ ] Purchase domain (.com, .io, or .app)
- [ ] Configure DNS for all services
  - Backend API subdomain (e.g., api.yourdomain.com)
  - Main app subdomain (e.g., app.yourdomain.com)
  - Admin subdomain (e.g., admin.yourdomain.com)
  - Marketing site (www.yourdomain.com or root domain)
  - Chatwoot subdomain (e.g., support.yourdomain.com)

**Name Suggestions from Planning:**
- Architecture/Structure: ArchFlow, StructDraw, DiagramFlow, ArchCanvas
- C4 Model Focused: C4Builder, C4Flow, SystemCanvas
- Modern/Tech: Archify, Structify, Diagramly, FlowArch, Blueprintly
- Simple/Direct: DiagramKit, ArchDraw, SystemDraw, FlowCanvas
- Premium: Architekt, Structura, Diagramma, Systema

### 2. Third-Party Service Setup

**Status:** ‚è≥ Pending

#### Stripe (Payment Processing)
- [ ] Create production Stripe account
- [ ] Create Pro tier product and price ($9/month)
- [ ] Create Team tier product and price ($29/month)
- [ ] Configure webhook endpoint: `https://your-backend.onrender.com/stripe/webhook`
- [ ] Select webhook events:
  - `customer.subscription.created`
  - `customer.subscription.updated`
  - `customer.subscription.deleted`
  - `invoice.payment_succeeded`
  - `invoice.payment_failed`
- [ ] Copy production keys:
  - Secret key (sk_live_...)
  - Publishable key (pk_live_...)
  - Webhook secret (whsec_...)
  - Pro price ID (price_...)
  - Team price ID (price_...)

#### Resend (Email Service)
- [ ] Sign up at https://resend.com
- [ ] Verify your domain (add DNS records)
- [ ] Generate API key
- [ ] Test email sending
- [ ] Configure sender email address (must be from verified domain)

#### Google Analytics
- [ ] Create GA4 property at https://analytics.google.com
- [ ] Get Measurement ID (format: G-XXXXXXXXXX)
- [ ] Add to marketing site environment variables

#### Upstash Redis (for Chatwoot)
- [ ] Create account at https://upstash.com
- [ ] Create Redis database (free tier: 10,000 commands/day)
- [ ] Copy Redis URL and password
- [ ] Add to Chatwoot environment variables

### 3. Deploy All Services

**Status:** ‚è≥ Pending

#### Deploy to Render (Backend, Frontend, Admin, Chatwoot)

**Initial Setup:**
1. Create Render account at https://render.com
2. Connect GitHub repository
3. Generate Render API key (Dashboard ‚Üí Account Settings ‚Üí API Keys)

**Deploy via Blueprint:**
1. Go to Render Dashboard
2. Click "New" ‚Üí "Blueprint"
3. Select your repository
4. Render will detect `render.yaml`
5. Review configuration
6. Click "Apply"

**Services to Deploy:**
- [ ] Backend API (`visual-tool-backend`)
- [ ] Frontend (`visual-tool-frontend`)
- [ ] Admin Frontend (`visual-tool-admin`)
- [ ] Chatwoot (`visual-tool-chatwoot`)
- [ ] PostgreSQL Database (`visual-tool-db`)
- [ ] Chatwoot PostgreSQL Database (`chatwoot-db`)

#### Deploy Marketing Site to Vercel

1. Create Vercel account at https://vercel.com
2. Connect GitHub repository
3. Import project
4. Set root directory to: `marketing-site`
5. Framework auto-detected as Next.js
6. Add environment variables (see below)
7. Click "Deploy"

**Verify Deployment:**
- [ ] Backend health check returns 200 OK
- [ ] Frontend loads and can connect to backend
- [ ] Admin app loads and can authenticate
- [ ] Marketing site loads correctly
- [ ] Chatwoot admin panel accessible
- [ ] All services can communicate with databases

### 4. Configure Environment Variables

**Status:** ‚è≥ Pending

#### Backend Service (`visual-tool-backend`)

Add in Render Dashboard ‚Üí Service ‚Üí Environment:

```
NODE_ENV=production
PORT=3000
DATABASE_HOST=[auto-configured from database]
DATABASE_PORT=[auto-configured from database]
DATABASE_USER=[auto-configured from database]
DATABASE_PASSWORD=[auto-configured from database]
DATABASE_NAME=[auto-configured from database]
JWT_SECRET=[auto-generated by Render]
JWT_EXPIRES_IN=7d
STRIPE_SECRET_KEY=sk_live_...
STRIPE_PUBLISHABLE_KEY=pk_live_...
STRIPE_WEBHOOK_SECRET=whsec_...
STRIPE_PRO_PRICE_ID=price_...
STRIPE_TEAM_PRICE_ID=price_...
RESEND_API_KEY=re_...
FROM_EMAIL=noreply@yourdomain.com
APP_URL=https://app.yourdomain.com
```

#### Frontend Service (`visual-tool-frontend`)

```
VITE_API_URL=https://api.yourdomain.com
```

#### Admin Service (`visual-tool-admin`)

```
VITE_API_URL=https://api.yourdomain.com
```

#### Marketing Site (Vercel)

Add in Vercel Project Settings ‚Üí Environment Variables:

```
NEXT_PUBLIC_GA_ID=G-XXXXXXXXXX
NEXT_PUBLIC_APP_URL=https://app.yourdomain.com
```

#### Chatwoot Service (`visual-tool-chatwoot`)

```
RAILS_ENV=production
NODE_ENV=production
INSTALLATION_ENV=docker
SECRET_KEY_BASE=[auto-generated by Render]
FRONTEND_URL=https://support.yourdomain.com
POSTGRES_HOST=[auto-configured from chatwoot-db]
POSTGRES_PORT=[auto-configured from chatwoot-db]
POSTGRES_USERNAME=[auto-configured from chatwoot-db]
POSTGRES_PASSWORD=[auto-configured from chatwoot-db]
POSTGRES_DATABASE=[auto-configured from chatwoot-db]
REDIS_URL=[from Upstash]
REDIS_PASSWORD=[from Upstash]
MAILER_SENDER_EMAIL=support@yourdomain.com
SMTP_ADDRESS=smtp.resend.com
SMTP_PORT=587
SMTP_USERNAME=resend
SMTP_PASSWORD=[Resend API key]
SMTP_AUTHENTICATION=plain
SMTP_ENABLE_STARTTLS_AUTO=true
```

### 5. Database Setup

**Status:** ‚è≥ Pending

#### Create First Admin User

After backend is deployed, connect to PostgreSQL and run:

```sql
-- Connect to visual-tool-db
INSERT INTO "user" (id, email, name, "passwordHash", "isGuest", "isAdmin", "createdAt", "updatedAt")
VALUES (
  gen_random_uuid(),
  'admin@yourdomain.com',
  'Admin User',
  '$2b$10$[hash from bcrypt]', -- Generate with: bcrypt.hash('your-password', 10)
  false,
  true,
  NOW(),
  NOW()
);
```

**To generate password hash:**
```bash
cd backend
node -e "const bcrypt = require('bcrypt'); bcrypt.hash('your-secure-password', 10).then(console.log);"
```

#### Migration Strategy (Recommended)

**Current Issue:** `synchronize: true` in production is risky (can cause data loss)

**Action Items:**
- [ ] Disable `synchronize: true` in `backend/src/app.module.ts`
- [ ] Enable proper migrations:
  ```typescript
  synchronize: false,
  migrations: ['dist/migrations/*.js'],
  migrationsRun: true,
  ```
- [ ] Generate initial migration from current schema
- [ ] Test migrations in staging environment
- [ ] Document migration workflow

**Reference:** See `PLANNING.md` lines 699-755 for detailed migration tasks.

### 6. Security & Compliance

**Status:** ‚è≥ Pending

#### Legal Pages

Create these pages in marketing site:

- [ ] **Privacy Policy**
  - Data collection practices
  - Cookie usage
  - Third-party services (Stripe, Google Analytics)
  - User rights (GDPR, CCPA)
  - Contact information

- [ ] **Terms of Service**
  - Account terms
  - Subscription terms
  - Acceptable use policy
  - Limitation of liability
  - Termination policy

- [ ] **Cookie Consent Banner**
  - Implement GDPR-compliant cookie consent
  - Allow users to accept/reject non-essential cookies
  - Link to Privacy Policy

#### Security Checklist

- [ ] All secrets in environment variables (never committed)
- [ ] HTTPS enabled on all services (automatic with Render/Vercel)
- [ ] CORS configured correctly
- [ ] Rate limiting enabled on API endpoints
- [ ] SQL injection protection (using TypeORM parameterized queries)
- [ ] XSS protection (React escapes by default)
- [ ] JWT tokens with reasonable expiration (7 days)
- [ ] Strong password requirements enforced
- [ ] Admin routes protected with AdminGuard

## üü° Important (Should Have Soon After Launch)

### 7. Content & Marketing

**Status:** ‚è≥ Pending

#### Marketing Site Content

- [ ] **Product Screenshots**
  - Main canvas/editor view
  - Collaboration features
  - Diagram examples
  - Admin dashboard
  - Pricing page

- [ ] **Demo Video or GIF**
  - 30-60 second product demo
  - Show key features
  - Upload to YouTube/Vimeo
  - Embed on landing page

- [ ] **Testimonials**
  - Collect from beta testers
  - Add to landing page
  - Include photos and company names

- [ ] **Blog Posts for SEO**
  - "Getting Started with C4 Model Diagrams" ‚úÖ (exists)
  - "Why We Built 26 Diagrams" ‚úÖ (exists)
  - "C4 Model vs UML: Which Should You Use?"
  - "Best Practices for Software Architecture Diagrams"
  - "How to Document Your System Architecture"
  - "Miro vs [Your Product]: A Comparison"
  - "Structurizr vs [Your Product]: A Comparison"

#### Social Media

- [ ] Create Twitter/X account
- [ ] Create LinkedIn company page
- [ ] Create Product Hunt listing
- [ ] Create GitHub organization (if open-sourcing parts)
- [ ] Prepare launch announcement posts

### 8. Chatwoot Integration

**Status:** ‚è≥ Pending (setup files created)

**Reference:** See `CHATWOOT_SETUP.md` for detailed instructions.

- [ ] Deploy Chatwoot to Render
- [ ] Create Upstash Redis account and configure
- [ ] Access Chatwoot admin panel
- [ ] Create first inbox (website channel)
- [ ] Get widget script code
- [ ] Add chat widget to frontend (`frontend/src/App.tsx`)
- [ ] Test chat functionality end-to-end
- [ ] Configure canned responses for common questions
- [ ] Set up business hours
- [ ] Create automation rules (auto-assign, auto-reply)
- [ ] Add team members when needed

**Widget Integration Example:**
```typescript
// Add to frontend/src/App.tsx or index.html
<script>
  (function(d,t) {
    var BASE_URL="https://support.yourdomain.com";
    var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
    g.src=BASE_URL+"/packs/js/sdk.js";
    g.defer = true;
    g.async = true;
    s.parentNode.insertBefore(g,s);
    g.onload=function(){
      window.chatwootSDK.run({
        websiteToken: 'YOUR_WEBSITE_TOKEN',
        baseUrl: BASE_URL
      })
    }
  })(document,"script");
</script>
```

### 9. Monitoring & Analytics

**Status:** ‚è≥ Pending

#### Error Tracking

**Recommended: Sentry**
- [ ] Create Sentry account (free tier available)
- [ ] Install Sentry SDK in backend
- [ ] Install Sentry SDK in frontend
- [ ] Configure error reporting
- [ ] Set up alerts for critical errors

**Backend Integration:**
```bash
cd backend
npm install @sentry/node
```

**Frontend Integration:**
```bash
cd frontend
npm install @sentry/react
```

#### Uptime Monitoring

**Options:**
- **UptimeRobot** (free tier: 50 monitors)
- **Pingdom** (free trial, then paid)
- **Better Uptime** (free tier available)

**Monitor These Endpoints:**
- [ ] Backend API health check
- [ ] Frontend homepage
- [ ] Admin app
- [ ] Marketing site
- [ ] Chatwoot

#### Application Monitoring

**Render Built-in:**
- CPU usage
- Memory usage
- Request count
- Response times
- Error rates

**Additional Monitoring:**
- [ ] Set up Render email alerts
- [ ] Configure Slack/Discord webhooks for critical alerts
- [ ] Monitor database performance
- [ ] Track WebSocket connection counts

### 10. SEO Optimization

**Status:** ‚è≥ Pending

#### Technical SEO

- [ ] **Sitemap Generation**
  - Next.js can auto-generate sitemap
  - Add to `marketing-site/app/sitemap.ts`
  - Submit to search engines

- [ ] **Robots.txt**
  - Configure in `marketing-site/public/robots.txt`
  - Allow crawling of public pages
  - Disallow admin/app pages

- [ ] **Open Graph Images**
  - Create OG image for homepage (1200x630px)
  - Create OG images for blog posts
  - Add meta tags to all pages

- [ ] **Meta Descriptions**
  - Write unique descriptions for all pages
  - Keep under 160 characters
  - Include target keywords

#### Search Engine Submission

- [ ] **Google Search Console**
  - Verify domain ownership
  - Submit sitemap
  - Monitor indexing status
  - Check for crawl errors

- [ ] **Bing Webmaster Tools**
  - Verify domain ownership
  - Submit sitemap
  - Monitor performance

#### Content Marketing

- [ ] Keyword research for target audience
- [ ] Create content calendar
- [ ] Write comparison articles (vs competitors)
- [ ] Create use case examples
- [ ] Build backlinks through guest posting

## üü¢ Nice to Have (Post-Launch)

### 11. Performance & Scalability

**Status:** ‚è≥ Pending

#### Critical Before 1,000 Users

**Redis Integration for WebSockets**

**Current Issue:** In-memory WebSocket state prevents horizontal scaling.

**Location:** `backend/src/collaboration/collaboration.service.ts:19`

**Solution:**
- [ ] Install `@socket.io/redis-adapter` and `redis` packages
- [ ] Set up Redis connection in NestJS
- [ ] Configure Socket.io Redis adapter
- [ ] Update collaboration service to use Redis for room state
- [ ] Add Redis health check
- [ ] Update `docker-compose.yml` with Redis service
- [ ] Test multi-instance deployment with load balancer

**Reference:** See `PLANNING.md` lines 671-710 for detailed tasks.

#### Database Optimization

**Status:** ‚úÖ Indexes Added

Database indexes have been added for:
- User table (created_at, updated_at, email)
- Diagram table (created_at, owner_id, composite)
- Subscription table (status, tier, user_id, composite)
- Diagram version table (diagram_id, composite)
- Diagram collaborator table (diagram_id, user_id, composite)

**Remaining:**
- [ ] Run performance tests before/after
- [ ] Monitor query performance in production
- [ ] Add caching layer for dashboard stats

#### Load Testing

- [ ] Install k6 or Artillery
- [ ] Create test scenarios:
  - Concurrent diagram editing
  - WebSocket connections
  - Admin dashboard queries
  - API endpoint throughput
- [ ] Establish baseline metrics
- [ ] Run tests after optimizations
- [ ] Document results in PERFORMANCE.md

### 12. Testing

**Status:** üü° Partially Complete

#### Backend Tests

**Status:** 52/58 tests passing (90%)

**Completed:**
- ‚úÖ Auth flow tests (15/15)
- ‚úÖ Diagram CRUD tests (19/19)
- ‚úÖ WebSocket collaboration tests (18/18)
- üü° Subscription tests (6/13) - TypeORM/SQLite compatibility issues
- üü° Admin tests (26/37) - TypeORM/SQLite compatibility issues

**Remaining:**
- [ ] Fix TypeORM/SQLite compatibility issues
- [ ] Add module integration tests
- [ ] Add targeted unit tests for complex business logic

#### Frontend Tests

**Status:** üü° Minimal

**Completed:**
- ‚úÖ Vitest + React Testing Library setup
- ‚úÖ Mock API and WebSocket providers
- ‚úÖ Example AuthModal test

**Remaining:**
- [ ] DiagramList component tests
- [ ] ShareDialog component tests
- [ ] AccountMenu component tests
- [ ] PricingPage component tests
- [ ] C4Node component tests
- [ ] useCollaboration hook tests
- [ ] useAuth hook tests

#### E2E Tests with Playwright

**Status:** ‚è≥ Not Started

**Recommended Tests:**
- [ ] Complete signup ‚Üí create diagram ‚Üí edit ‚Üí share flow
- [ ] Real-time collaboration between two browser instances
- [ ] Subscription purchase flow
- [ ] Admin dashboard operations
- [ ] Password reset flow
- [ ] Email invitation flow

### 13. Documentation

**Status:** üü° Partially Complete

#### User Documentation

- [ ] Create help center section in marketing site
- [ ] Write getting started guide
- [ ] Create video tutorials:
  - Creating your first diagram
  - Collaborating with team members
  - Exporting diagrams
  - Managing subscription
- [ ] Document keyboard shortcuts
- [ ] Create FAQ page

#### Developer Documentation

- [ ] API documentation (if offering API access)
- [ ] Webhook documentation
- [ ] Integration guides
- [ ] Architecture documentation
- [ ] Contributing guidelines (if open-sourcing)

#### Existing Documentation

- ‚úÖ `PLANNING.md` - Comprehensive project planning
- ‚úÖ `DEPLOYMENT.md` - Deployment guide for Render and Vercel
- ‚úÖ `TESTING.md` - Testing strategy and setup
- ‚úÖ `STRIPE_BILLING.md` - Stripe integration guide
- ‚úÖ `ADMIN_QUICKSTART.md` - Admin app setup
- ‚úÖ `ADMIN_USER_MANAGEMENT.md` - User management guide
- ‚úÖ `PASSWORD_RESET_AND_INVITATIONS.md` - Password reset flow
- ‚úÖ `CHATWOOT_SETUP.md` - Chatwoot setup guide
- ‚úÖ Backend `README.md`
- ‚úÖ Frontend `README.md`
- ‚úÖ Admin `README.md`
- ‚úÖ Marketing `README.md`

## üìã Cost Summary

### Monthly Recurring Costs

**Minimum Setup: ~$14-21/month**
- Render Backend (Starter): $7/month
- Render PostgreSQL (Starter): $7/month
- Chatwoot PostgreSQL (Starter): $7/month
- Upstash Redis: Free tier (10,000 commands/day)
- Render Static Sites (Frontend/Admin): Free
- Vercel (Marketing): Free tier (100GB bandwidth)

**Recommended Setup: ~$34-41/month**
- Render Backend (Starter): $7/month
- Render PostgreSQL (Standard): $20/month
- Chatwoot PostgreSQL (Starter): $7/month
- Upstash Redis: Free tier
- Render Static Sites: Free
- Vercel: Free tier

### Variable Costs

**Stripe:**
- 2.9% + $0.30 per transaction
- No monthly fees

**Resend:**
- Free tier: 100 emails/day, 3,000/month
- Paid: $20/month for 50,000 emails

**Vercel (if exceeding free tier):**
- Pro: $20/month per user
- 1TB bandwidth included

### Scaling Costs

**At 1,000 users:**
- Backend: Consider Standard plan ($25/month)
- Database: Standard plan recommended ($20/month)
- Redis: May need paid tier (~$10/month)
- Total: ~$55-62/month

**At 10,000 users:**
- Backend: Pro plan ($85/month) or multiple instances
- Database: Pro plan ($90/month)
- Redis: Paid tier ($10-30/month)
- CDN: May need Vercel Pro
- Total: ~$185-225/month

## üéØ Recommended Launch Sequence

### Week 1: Foundation
- [ ] Finalize product name
- [ ] Purchase domain
- [ ] Set up all third-party accounts (Stripe, Resend, GA, Upstash)
- [ ] Create legal pages (Privacy Policy, Terms of Service)

### Week 2: Deployment
- [ ] Deploy all services to Render
- [ ] Deploy marketing site to Vercel
- [ ] Configure all environment variables
- [ ] Set up custom domains
- [ ] Create first admin user
- [ ] Verify all services are working

### Week 3: Content & Testing
- [ ] Add cookie consent banner
- [ ] Take product screenshots
- [ ] Record demo video
- [ ] Deploy and configure Chatwoot
- [ ] Add chat widget to frontend
- [ ] Test all user flows thoroughly
- [ ] Fix any critical bugs

### Week 4: Soft Launch
- [ ] Launch to friends and family
- [ ] Invite beta testers
- [ ] Gather feedback
- [ ] Monitor errors and performance
- [ ] Make improvements based on feedback
- [ ] Set up monitoring and alerts

### Week 5: Public Launch
- [ ] Announce on social media
- [ ] Post on Product Hunt
- [ ] Share on relevant communities (Reddit, HackerNews, etc.)
- [ ] Send launch email to beta testers
- [ ] Monitor closely for issues
- [ ] Respond to user feedback quickly

## ‚ö†Ô∏è Known Issues to Address

### Critical Issues

1. **WebSocket State Management**
   - **Problem:** In-memory room state prevents horizontal scaling
   - **Impact:** Cannot run multiple backend instances
   - **Priority:** Fix before 1,000 concurrent users
   - **Solution:** Implement Redis adapter for Socket.io

2. **Database Synchronize in Production**
   - **Problem:** `synchronize: true` risks data loss on schema changes
   - **Impact:** Potential downtime or data corruption
   - **Priority:** Fix before launch
   - **Solution:** Disable synchronize, implement proper migrations

### Non-Critical Issues

3. **Test Failures**
   - **Problem:** 6 subscription tests and 11 admin tests failing
   - **Cause:** TypeORM/SQLite compatibility issues
   - **Impact:** Reduced test coverage
   - **Priority:** Fix post-launch
   - **Solution:** Use PostgreSQL for tests or fix SQLite compatibility

4. **Missing Frontend Tests**
   - **Problem:** Minimal component and E2E test coverage
   - **Impact:** Harder to catch regressions
   - **Priority:** Add incrementally post-launch
   - **Solution:** Implement Playwright E2E tests for critical flows

## üìû Support Resources

### Documentation
- Render Docs: https://render.com/docs
- Vercel Docs: https://vercel.com/docs
- Stripe Docs: https://stripe.com/docs
- Resend Docs: https://resend.com/docs
- Chatwoot Docs: https://www.chatwoot.com/docs

### Status Pages
- Render Status: https://status.render.com
- Vercel Status: https://vercel-status.com
- Stripe Status: https://status.stripe.com

### Communities
- Render Community: https://community.render.com
- Vercel Discussions: https://github.com/vercel/vercel/discussions

## ‚úÖ Launch Readiness Checklist

Before going live, verify:

- [ ] All services deployed and accessible
- [ ] Custom domains configured with SSL
- [ ] All environment variables set correctly
- [ ] First admin user created
- [ ] Stripe webhooks configured and tested
- [ ] Email sending working (test password reset)
- [ ] Payment flow working (test subscription purchase)
- [ ] Legal pages published (Privacy, Terms)
- [ ] Cookie consent implemented
- [ ] Google Analytics tracking
- [ ] Error monitoring set up
- [ ] Uptime monitoring configured
- [ ] Backup strategy in place
- [ ] Rollback procedure documented and tested
- [ ] Support system ready (Chatwoot)
- [ ] Marketing site live with content
- [ ] Social media accounts created
- [ ] Launch announcement prepared

## üöÄ Post-Launch Priorities

### First 24 Hours
- Monitor error rates and performance
- Respond to user feedback quickly
- Fix any critical bugs immediately
- Watch for payment processing issues
- Monitor server resources

### First Week
- Gather user feedback
- Analyze usage patterns
- Identify pain points
- Make quick improvements
- Engage with early users

### First Month
- Implement user-requested features
- Optimize performance based on real usage
- Improve onboarding based on feedback
- Create more content (blog posts, tutorials)
- Build community engagement

---

**Last Updated:** December 24, 2024

**Next Review:** Before deployment to production
